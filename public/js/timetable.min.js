"use strict";var Timetable=function(){this.scope={hourStart:9,hourEnd:17},this.locations=[],this.events=[]};Timetable.Renderer=function(b){if(!(b instanceof Timetable))throw new Error("Initialize renderer using a Timetable");this.timetable=b},function(){function b(z,A){return g(z)&&g(A)}function g(z){return j(z)&&k(z)}function j(z){return z===parseInt(z,10)}function k(z){return 0<=z&&24>z}function q(z,A){return-1!==A.indexOf(z)}function w(z,A){var B=z instanceof Date&&A instanceof Date;return B&&A>z}function x(z){for(;z.firstChild;)z.removeChild(z.firstChild)}function y(z){var A=10>z?"0":"";return A+z+":00"}Timetable.prototype={setScope:function(z,A){if(!b(z,A))throw new RangeError("Timetable scope should consist of (start, end) in whole hours from 0 to 23");return this.scope.hourStart=z,this.scope.hourEnd=A,this},addLocations:function(z){var B=this.locations;if(!function(){return z instanceof Array}())throw new Error("Tried to add locations in wrong format");return z.forEach(function(C){if(q(C,B))throw new Error("Location already exists");B.push(C)}),this},addEvent:function(z,A,B,C,D){if(!q(A,this.locations))throw new Error("Unknown location");if(!w(B,C))throw new Error("Invalid time range: "+JSON.stringify([B,C]));return this.events.push({name:z,location:A,startDate:B,endDate:C,url:D}),this}},Timetable.Renderer.prototype={draw:function(z){function D(Q){for(var R=0;R<N.locations.length;R++){var S=Q.appendChild(document.createElement("li")),T=S.appendChild(document.createElement("span"));T.className="row-heading",T.textContent=N.locations[R]}}function G(Q){for(var R=Q.appendChild(document.createElement("header")),S=R.appendChild(document.createElement("ul")),T=!1,U=!1,V=N.scope.hourStart;!T;){var W=S.appendChild(document.createElement("li")),X=W.appendChild(document.createElement("span"));X.className="time-label",X.textContent=y(V),V===N.scope.hourEnd&&(N.scope.hourStart!==N.scope.hourEnd||U)&&(T=!0),24==++V&&(V=0,U=!0)}}function H(Q){var R=Q.appendChild(document.createElement("ul"));R.className="room-timeline";for(var T,S=0;S<N.locations.length;S++)T=R.appendChild(document.createElement("li")),I(N.locations[S],T)}function I(Q,R){for(var T,S=0;S<N.events.length;S++)T=N.events[S],T.location===Q&&J(T,R)}function J(Q,R){var S=Q.url.url,T=S?"a":"span",U=R.appendChild(document.createElement(T)),V=U.appendChild(document.createElement("small"));U.title=Q.name,S&&(U.href=Q.url.url),U.className=`time-entry ${Q.url.class?Q.url.class:""}`,U.style.width=K(Q),U.style.left=M(Q),V.textContent=Q.name,Q.url.onClick&&R.addEventListener("click",()=>{Q.url.onClick(Q.url.data)})}function K(Q){var R=Q.startDate,S=Q.endDate,T=L(R,S);return 100*(T/O)+"%"}function L(Q,R){return(R.getTime()-Q.getTime())/1e3/60/60}function M(Q){var R=Q.startDate,S=R.getHours()+R.getMinutes()/60;return 100*((S-N.scope.hourStart)/O)+"%"}var N=this.timetable,O=function(Q,R){return R>Q?R-Q:24+R-Q}(N.scope.hourStart,N.scope.hourEnd),P=document.querySelector(z);(function(Q){if(null===Q)throw new Error("Timetable container not found")})(P),x(P),function(Q){var R=Q.appendChild(document.createElement("aside")),S=R.appendChild(document.createElement("ul"));D(S)}(P),function(Q){var R=Q.appendChild(document.createElement("section")),S=R.appendChild(document.createElement("time"));G(S),H(S)}(P)}}}();